<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form id="moviesView">
        <h2>List of movies</h2>
        <p:commandButton value="Add Movie" id="AddwithIcon" actionListener="#{movieAddEditBean.initAdd()}" update=":moviePopup:addMovieForm" oncomplete="addeditDialog.show()" icon="ui-icon-disk" />
        <p:dataTable id="listMovies" var="movies" value="#{movieBean.movieList}">
            <p:column headerText="Title">
                <h:outputText value="#{movies.title}" />
            </p:column>
            <p:column>
                <p:commandButton value="Edit Movie" id="EditwithIcon" actionListener="#{movieAddEditBean.initEdit(movies)}" update=":moviePopup:addMovieForm" oncomplete="addeditDialog.show()" icon="ui-icon-disk" />
            </p:column>
        </p:dataTable>
        <h:outputText value="test" />
        </h:form>
        <h:form id="moviePopup">
        <p:dialog header="Add/Edit Movie" widgetVar="addeditDialog">
            
           <p:panelGrid columns="2" id="addMovieForm">
                <h:outputText value="Title :" />
                <h:inputText value="#{movieAddEditBean.movie.title}" required="true"></h:inputText>
                
                <p:commandButton value="Cancel" id="CancelwithIcon" type="button" onclick="addeditDialog.hide()" icon="ui-icon-disk" />
                <p:commandButton value="Save" id="SavewithIcon" actionListener="#{movieAddEditBean.saveMovie()}" oncomplete="addeditDialog.hide()" update=":moviesView:listMovies" icon="ui-icon-disk" />
            </p:panelGrid>
            
        </p:dialog>
        </h:form>
    </h:body>
</html>

